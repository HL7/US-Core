<!-- ================================================================
 The following Profile list is generated by the included liquid script below.
 The source data is at The source table is input/data/uscdi-table.csv
 which is manually edited for each new version of USCDI.

1. Source data is at `input/data/uscdi-table.csv` which manually updated for every USCDI update
2. this page = `input/pagecontent/uscdi.md`
3. liquid template files = this template uses the `includes/sd_link.html` as a macro to get the profile page links.
4. icons (png files) =  icons (png images) are in the `input/images` are named using the "kebab case" USCDI class names.
in other words, `input/images/<"kebab case" USCDI class names>.png`.

input/data/uscdi-table.csv columns:

- data_class_number: iterator to group rows by USCDI Data Classes. Rows are sorted and ordered by Data Classes manually.
- data_class: USCDI Data Class Title
- uscore_profile: US Core Profile Title that maps to the Data Class or Data Element
- data_element: USCDI Data Element Title. It the same as the Data Class at the start of each Data Class group
- resource_type: US Core Profile Resource Type for each USCDI Data Element.  Is empty at the start of each Data Class group
- extension: US Core Extension that map the USCDI Data Elements.
- fhir_extension_url: not used
- fhir_path: FHIRPath expression to the USCDI Data Element (not verified)
- comment: Additional US Core guidance for implementing USCDI
- comment_link: Relative link to US Core's additional guidance

 ====================================================================== -->

{% assign rows = site.data.uscdi-table %}
{% assign items_grouped = rows | group_by: "data_class" %}


<style>
  .panel {
    background: #0074bb;
    color: white;
    font-weight: bold;
    margin-bottom: 3px;
    margin-right: 40px;
    margin-left: 40px;
    padding: 0;
    box-shadow: 1px 2px DarkGray;
  }

  .panel-body {
    padding-left: 15px;
  }

  .panel table {
    /* table-layout: fixed;
    word-wrap: break-word;
    width: auto; */
    border: 0 !important;
    padding-right: 20px;
  }

  .panel th {
    font-weight: bold;
    text-align: left;
    font-size: 1.2em;
  }

  .panel td {
    font-weight: bold;
    text-align: left;
    font-size: 1.2em;
  }

  .panel a {
    color: white;
    font-weight: bold;
    text-decoration: underline;
  }

  .icon-right {
    float: right;
    padding: 6px
  }
</style>


<div>
  <div class="icon-right">
    <img src="USCDI.png" alt="USCDI Logo" class="pull-right img-responsive" style="width: 60%;">
  </div>
  <p style="font-size: 300%; font-weight: bold;" class="text-center">US Core Data for Interoperability USCDI</p>
</div>

{% for group in items_grouped %}
{% for item in group.items %}
{% if forloop.first %}

<div class="panel">
  <div class="panel-body">
    <div class="icon-right">
      <img src="{{ item.data_class | downcase | replace: " ", "-" | replace: "/" , "-" }}.png" class="media-object"
        alt="{{item.data_class}}" style="width:60px">
    </div>
    <table class="table table-condensed">
      <thead>
        <tr>
          <th class="col-sm-4">{{ item.data_class }}</th>
          <th class="col-sm-4">
            {% assign profiles = item.uscore_profile | split: "|" %}
            {% if profiles != empty %} <!-- no profiles defined in table for USCDI  ( e.g., Provenance )-->
            {% for profile in profiles %}
            {% capture title %}{{profile | strip}}{% endcapture %}
            <a href="{% include sd_link.html title = title  %}">{{ title }}</a>
            {% unless forloop.last %}
            <br />
            {% endunless %}
            {% endfor %}
            {% else %}
            -
            {% endif %}
          </th>
          <th class="col-sm-2"><a href="{{ item.comment_link }}">{{ item.comment }}</a></th>
        </tr>
      </thead>
      <tbody>

        {% else %}

        <tr>
          <td>&nbsp;&nbsp;&nbsp;&nbsp;&bull;{{ item.data_element }}</td>

          <td>
            {% assign profiles = item.uscore_profile | split: "|" %}
            {% if profiles != empty %} <!-- no profiles defined in table for USCDI  ( e.g., Provenance )-->
            {% for profile in profiles %}
            {% capture title %}{{profile | strip}}{% endcapture %}
            {% capture url %}{% include sd_link.html title = title %}{% endcapture %}
            {% if url == '' %} <!-- not a US Core defined SD - assume is standard extension and use URL provided in the csv  -->
            <a href="{{site.data.fhir.ver.hl7_fhir_uv_extensions_r4}}/{{ item.fhir_extension_url }}">{{ title }}</a>
            {% else %}
            <a href="{{ url }}">{{ title }}</a>
            {% endif %}
            {% unless forloop.last %}
            <br />
            {% endunless %}
            {% endfor %}
            {% else %}
            <a href="basic-provenance.html#individual-level-provenance">Individual Provenance</a>
            {% endif %}
          </td>

          <td>
            <a href="{{ item.comment_link }}">{{ item.comment }}</a>
          </td>
        </tr>

        {% if forloop.last %}
      </tbody>
    </table>
  </div>
</div>

{% endif %}
{% endif %}
{% endfor %}
{% endfor %}